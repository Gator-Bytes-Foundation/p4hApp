<!DOCTYPE html> {% extends "header.html" %}
<!-- all html files should extend from the header, (the header contains all static references as well) -->
{% block content %}
<head>
  <title>P4hApp</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <style type="text/css">@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF;}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF;}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF;}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF;}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF;}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF;}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;}</style>
    <style type="text/css">@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/materialicons/v82/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2) format('woff2');}.material-icons{font-family:'Material Icons';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased;}</style>
    <link rel="stylesheet" href="static/dist/styles.css">
    <link  rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}" ></link>
  </head>

<div id="entire_profile" class="container emp-profile" onload="window.localStorage.setItem('rocket_login', rocket_user['authToken']); console.log(rocket_user['authToken']);">

    <!-- MODAL OVERLAY FOR EDIT PROFILE -->
    <div id="edit_menu" style="display:none;" class="backgroundOverlay">
        <div class="wrapper overlayBlock fadeInDown " id="edit_profile_menu">
            <button id="exit_edit" class="exit_icon" aria-label="Close Account Info Modal Box">&times;</button>
              <form id="edit-profile" action="/profile" method="post" enctype="multipart/form-data">
                  <div style="text-align: center; margin-bottom: 35px;" class="">
                      <h3>Edit Menu</h3>
                  </div>
                  <div class="row">
                      <div class="col-12 col-sm-3">
                          <p>Profile Name: </p>
                      </div>
                      <div class="col-12 col-sm-8">
                          <textarea class="text_box" name="name" id="profile-name" style="width: 100%;" placeholder="{{profile.user.name}}" size="5"></textarea>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-12 col-sm-3">
                          <p>Profile Picture</p>
                      </div>
                      <div class="col-4 col-sm-3">
                          <span onclick="document.getElementById('input-profile-pic').click();"  id="profile-pic" class="profile_button oi oi-cloud-upload" aria-hidden="true">Upload Picture</span>
                          <input type="file" name="avatar" id="input-profile-pic" class="inputfile" style="display: none;" data-multiple-caption="{count} files selected" multiple/>
                      </div>
                      <div class="center">
                          <img id="display-profile-pic" class="image-cropper img-fluid rounded-circle" alt="Profile Picture" src="data:;base64,{{ profile.profile_pic}}" />
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-12 col-sm-3">
                          <p>School:</p>
                      </div>
                      <div class="col-12 col-sm-8">
                          <textarea class="text_box" name="school" id="school_name" style="width: 100%;" placeholder="{{profile.user.school}}" size="5"></textarea>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-12 col-sm-3">
                          <p>Email:</p>
                      </div>
                      <div class="col-12 col-sm-8">
                          <textarea class="text_box" name="email" id="email_name" style="width: 100%;" placeholder="{{profile.user.email}}" size="5"></textarea>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-12 col-sm-3">
                          <p>Phone:</p>
                      </div>
                      <div class="col-8">
                          <textarea class="text_box" name="phone" id="phone" style="width: 100%;" placeholder="{{profile.user.phone}}" size="5"></textarea>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-12 col-sm-3">
                          <p>Location:</p>
                      </div>
                      <div class="col-8">
                          <textarea class="text_box" name="location" id="loc" style="width: 100%;" placeholder="{{profile.user.location}}" size="5"></textarea>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-12 col-sm-3">
                          <p>Pozisyon:</p>
                      </div>
                      <div class="col-8">
                          <textarea class="text_box" name="position" id="loc" style="width: 100%;" placeholder="{{profile.user.position}}" size="5"></textarea>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-12 col-sm-3">
                          <p>Biography:</p>
                      </div>
                      <div class="row col-12 col-sm-8">
                          <textarea class="text_box" name="bio" id="bio" style="width: 100%; height:50px;" placeholder="{{profile.user.bio}}" size="5"></textarea>
                      </div>
                  </div>
                  <div class="row justify-content-center">
                      <div class="col-10 col-sm-6 col-md-4">
                          <input type="submit" value="Save" class="profile_button">
                      </div>
                  </div>
              </form>
        </div>
    </div>
    <!------------------------ search bar -------------------------->
    <div class="dropdown">
        <div class="dropdown-content">
            <span class="oi oi-magnifying-glass" aria-hidden="true"></span>
            <!-- input element calls filter function anytime user types -->
            <input class="" type="text" placeholder="Search.." id="profileSearchInput" >
        </div>
        <div id="profileSearchDropdown" class="list_of_items">
            {% if(users != None) %} {% for i in range(users | length) %}
            <form method="GET" action="/profile/{{users[i].canvasId}}"> <!-- pass the username into the route url -->
                <a><button type="submit" class="erase"></button>{{users[i].name}}</a>
            </form>
            {% endfor %} {% endif %}
        </div>
    </div>
    <div class="slim-row bottom">
        <div class="bottom col-2 slim">
            {% if profile.canvas_user.id == 1 %}
            <img class="image-cropper img-fluid slim" alt="placeholder" src="{{ url_for('static', filename='images/p4h.png') }}">
            {% else %}
            <img id="profile_pic_img" class="img-fluid slim rounded-circle" alt="placeholder" src="data:;base64,{{ profile.profile_pic}}" /></img>
            {% endif %}
        </div>
        <div class="col-8 col-sm-8 ">
            <h4>{{profile.canvas_user.name}}</h4>
            <small class=""> <b>Pozisyon:</b> Elementary Teacher </small> <br>
            <small> <b>De Mwen :</b> {{profile.user.bio}} </small> </div>
        </div>
    <div class="col-md-10 col-12">
        <div id="mytabs" class="class=fakeclasshere2">
            <ul class="nav nav-tabs" role="tablist">
                </divjnjfdk>
                <li class="nav-item"> <a class="nav-link" onclick="openTab(event, 'about')" aria-controls="about" id="about-tab" rel="about" data-toggle="tab" role="tab" aria-selected="true">About</a> </li>
                <li class="nav-item"> <a class="nav-link" onclick="openTab(event, 'timeline')" aria-controls="timeline" id="timeline-tab" rel="timeline" data-toggle="tab" role="tab" aria-selected="false">Timeline</a> </li>
            </ul>
        </div>
    </div>
    <div class="buttons_row">
        <!-- current_user (SQL DB, not canvas) is user stored in Flask Login => so it shows if the current user is looking at someone elses profile -->
        {% if(profile.canvas_user.id == current_user.canvasId) %}
        <div class="col-6 col-sm-5">
            <button type="submit" id="edit_profile" class="profile_button button-bg" name="edit">Edit Pwofil</button>
        </div>
        {% endif %}
        {% if( (profile.canvas_user.id == current_user.canvasId or current_user.canvasId == 1) and (profile.user.canvasId != 1) ) %} <!-- admin has no progress, but can see everyone elses  -->
        <div class="col-6 col-sm-5">
            <form action="/profile/{{profile.canvas_user.id}}/progress">
                <button type="submit" class="profile_button button-bg">Pwogre Mwen</button>
            </form>
        </div>
        {% endif %}
    </div>
    <div class="col-12 col-lg-9">
        <div class="profile-tab ">
            <div id="timeline" class="profile-work tab-pane" role="tabpanel">
                <!-- 1st tab -->
                <h3>Pwofil Pos</h3>
                {% if( (profile.canvas_user.id == current_user.canvasId) or (current_user.canvasId == 1)) %} <!-- 1 is admin -->
                <div id="write_post"> <!-- ID being used for appending posts -->
                    <div style="text-align: center;" class="post_box">
                        <div class="profile-name">
                            <figure class="profile-pic-post post"><img alt="No Profile Picture" class="img-fluid rounded-circle" src="data:;base64,{{ currentUserProfilePic }}" /></figure>
                            <div class="col-10" id="">
                                <textarea class="text_box" name="{{profile.canvas_user.name}}" id="textbox-post" style="width: 100%;" placeholder="Write Post Here" size="5"></textarea>
                                <span id="upload-post" onclick="document.getElementById('input-upload-post').click();" class="iconify upload_icon" data-icon="ant-design:cloud-upload-outlined" data-inline="false"></span>
                                <input type="file" name="userFile" id="input-upload-post" class="invisble" data-multiple-caption="{count} files selected" onclick="this.value = null" multiple/>
                                <label class="invisble" id="label-upload-post" style="display: none;" for="input-upload-post"><strong>Choose a file</strong></label>
                                <div class="row ">
                                    <a href="#" name="{{profile.user.id}}" id="post" value="Post" style="width:100%;" class="profile_button">Post</a>
                                </div>
                            </div>
                        </div>
                        <img id="display-upload-post" class="img-fluid post-pic" />
                    </div>
                </div>
                {% endif %}
                <!-- Loading all posts from user's profile -->
                {% for post in profile.posts %}
                    {% include 'post.html' %}
                {% endfor %}
            </div>
            <table id="about" class="about-block tab-pane" style="display:none" role="tabpanel">
                <tbody class="about-inner">
                    <tr class="">
                        <td class="">
                            <label>User Id: </label>
                        </td>
                        <td class="left">
                            <div  >{{profile.user.id}}</div>
                        </td>
                    </tr>
                    <tr class="">
                        <td class="">
                            <label>Name: </label>
                        </td>
                        <td class="left">
                            <div>{{profile.user.name}}</div>
                        </td>
                    </tr>
                    <tr class="">
                        <td class="">
                            <label>Email: </label>
                        </td>
                        <td class="left">
                            <div>{{profile.user.email}}</div>
                        </td>
                    </tr>
                    <tr class="">
                        <td class="">
                            <label>Phone: </label>
                        </td>
                        <td class="left">
                            <div>{{profile.user.phone}}</div>
                        </td>
                    </tr>
                    <tr class="">
                        <td class="">
                            <label>Location: </label>
                        </td>
                        <td class="left">
                            <div>{{profile.user.location}}</div>
                        </td>
                    </tr>
                    <tr class="">
                        <td class="">
                            <label>School: </label>
                        </td>
                        <td class="left">
                            <div>{{profile.user.school}}</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<script src="{{ url_for('static', filename='js/profile.js') }}"></script>
<script src="static/dist/runtime.js" defer=""></script>
<script src="static/dist/polyfills.js" defer=""></script>
<script src="static/dist/vendor.js" defer="">
</script><script src="static/dist/main.js" defer=""></script>
{% endblock %}
<!-- this appears when looking at html but if running Flask, will not appear (needed for extending from header.html -->
